!function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var o=t(cm4all_wordpress_debug);function s(e,t){return Array.from(t.matchAll(/[^\/#]+/g)).flat().reduce(((e,t)=>function(e){let t,o=e[0],s=1;for(;s<e.length;){const n=e[s],l=e[s+1];if(s+=2,("optionalAccess"===n||"optionalCall"===n)&&null==o)return;"access"===n||"optionalAccess"===n?(t=o,o=l(o)):"call"!==n&&"optionalCall"!==n||(o=l(((...e)=>o.call(t,...e))),t=void 0)}return o}([e,"optionalAccess",e=>e[t]])),e)}function n(e,t,o){let s=e;for(let n=0;n<o.steps;n++)s=parseFloat(s*o.scale),s="px"===t?Math.round(s):s.toFixed(2);return s}function l(e,t=Object.values(window.snippet_library)){for(const o of t)for(const t of o.snippets)if(t.id===e)return t;return{}}const c={css:"<style>(.*)</style>",js:"<script>(.*)<\/script>"};function i(e,t){const o=e.type.split("+");for(const s of o){let n="";if(1===o.length)n=e.value.global;else{n=new RegExp(c[s]).exec(e.value.global)[1]}let l=null;"css"===s?(l=document.createElement("style"),l.id="cm4all-code-snippet-"+e.id+"-inline-css",l.styleSheet?l.styleSheet.cssText=n:l.appendChild(document.createTextNode(n))):"js"===s&&(l=document.createElement("script"),l.id="cm4all-code-snippet-"+e.id+"-js-after",l.type="text/javascript",l.innerHTML=n),t.getElementsByTagName("head")[0].appendChild(l)}}function a(e,t){const o=t.querySelectorAll(`style[id^="cm4all-code-snippet-${e}"],script[id^="cm4all-code-snippet-${e}"]`);for(const s of o)s.parentNode.removeChild(s)}function r(e){let t,o=e[0],s=1;for(;s<e.length;){const n=e[s],l=e[s+1];if(s+=2,("optionalAccess"===n||"optionalCall"===n)&&null==o)return;"access"===n||"optionalAccess"===n?(t=o,o=l(o)):"call"!==n&&"optionalCall"!==n||(o=l(((...e)=>o.call(t,...e))),t=void 0)}return o}const m=o.default("cm4all-customizer");function u(e){return"string"==typeof e&&e.startsWith("trinity-",0)?`var(--wp--preset--color--${e})`:e}function d(e,t,o){m('document.documentElement.style.setProperty("--cm4all-theme-%s", "%s");',t,o);const s=r([document,"access",e=>e.getElementById,"call",t=>t(e),"optionalAccess",e=>e.sheet]);if(s)for(const n of s.cssRules)"body"===n.selectorText&&-1!==n.cssText.indexOf(`--cm4all-theme-${t}`)&&n.style.setProperty(`--cm4all-theme-${t}`,o);else document.documentElement.style.setProperty(`--cm4all-theme-${t}`,o)}function p(e,t){m("customize(%O)",e);const o=(t,l)=>{Object.entries(t).forEach((([t,c])=>{if("object"==typeof c&&t.includes("fontfamily")&&c.name){const e="initial"!==c.name?"'":"";if(d("cm4all-customizer-font-handle-inline-css",t,`${e}${c.name}${e}`),void 0===c.url)return;if(void 0!==window.theme_schema.fonts.google_fonts.find((e=>e.family===c.name))){const e="https://fonts.googleapis.com/css2?family="+c.name.replace(" ","+")+":ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900",t=new XMLHttpRequest;t.open("GET",e),t.send(),t.onreadystatechange=()=>{if(t.readyState===XMLHttpRequest.DONE){const e=t.status;if(0===e||e>=200&&e<400){const e=t.responseText,o=document.createElement("style");o.type="text/css",o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e)),document.getElementsByTagName("head")[0].appendChild(o)}}}}else if(c.url){new FontFace(c.name,`url(${c.url})`).load().then((e=>document.fonts.add(e))).catch((e=>{console.log("failed to load font %s: %O",c.name,e)}))}}else if(r([c,"optionalAccess",e=>e.desktop])){const o=l[t]["ui:inherit"];for(const l in c){let i=c[l];if("initial"===i||-1===i){i=s(e,o.$ref);const t=i.toString().match(/([^a-z]+)([a-z]+)/);t&&r([o,"optionalAccess",e=>e.scaling])&&(i=n(parseFloat(t[1]),t[2],r([o,"optionalAccess",e=>e.scaling,"access",e=>e[l]]))+t[2])}d(`cm4all-customizer-${"logo-navigation-presets"===t?"dummy":"font"}-handle-inline-css`,l+"-"+t,i)}}else if(t.includes("fontweight")){const e=c.substring(0,3),o=c.includes("italic")?"italic":"normal";d("cm4all-customizer-font-handle-inline-css",t,e),d("cm4all-customizer-font-handle-inline-css",t+"-style",o)}else if(" "===c&&"colorpalette"===l[t]["ui:widget"]){const o=l[t]["ui:inherit"],n=s(e,o.$ref);d("cm4all-customizer-dummy-handle-inline-css",t,c=u(n))}else if("object"==typeof c)if(r([c,"optionalAccess",e=>e.slug])&&r([c,"optionalAccess",e=>e.color])){const e=r([document,"access",e=>e.getElementById,"call",e=>e("global-styles-inline-css"),"optionalAccess",e=>e.sheet]);if(e)for(const t of e.cssRules)"body"===t.selectorText&&t.style.setProperty(`--wp--preset--color--${c.slug}`,c.color),t.selectorText===`.has-${c.slug}-color`&&t.style.setProperty("color",c.color,"important"),t.selectorText===`.has-${c.slug}-background-color`&&t.style.setProperty("background-color",c.color,"important");else m('document.documentElement.style.setProperty("--wp--preset--color--%s", "%s");',c.slug,c.color),document.documentElement.style.setProperty(`--wp--preset--color--${c.slug}`,c.color)}else if(r([c,"optionalAccess",e=>e.desktop]))for(const e in c)d("cm4all-customizer-dummy-handle-inline-css",e+"-"+t,c[e]);else o(c,l[t]);else d("cm4all-customizer-dummy-handle-inline-css",t,c=u(c))}))};o(e,t)}if(!Object.keys(window.theme_schema.values).length&&window.cm4all_wordpress_react_jsonschema_form_utils)try{window.theme_schema.values=window.cm4all_wordpress_react_jsonschema_form_utils.getDefaultFormState(window.theme_schema.schema)}catch(g){throw console.log("Failed to compute default theme settings"),g}function f(){return window.top.document.querySelector("#customize-preview > iframe").contentWindow.document}if(window.snippetListener=window.snippetListener||!1,!window.snippetListener){let e=null;document.documentElement.addEventListener("snippet-add",(t=>{null===e&&(console.log("no frame found, getting it now"),e=f());for(const o of t.detail){i(l(o,Object.values(window.snippet_library)),e)}})),document.documentElement.addEventListener("snippet-remove",(t=>{null===e&&(console.log("no frame found, getting it now"),e=f());for(const o of t.detail)a(o,e);t.stopPropagation()})),window.snippetListener=!0}function h(e){let t,o=e[0],s=1;for(;s<e.length;){const n=e[s],l=e[s+1];if(s+=2,("optionalAccess"===n||"optionalCall"===n)&&null==o)return;"access"===n||"optionalAccess"===n?(t=o,o=l(o)):"call"!==n&&"optionalCall"!==n||(o=l(((...e)=>o.call(t,...e))),t=void 0)}return o}p(window.theme_schema.values,window.theme_schema.schema_ui);o.default("cm4all-customizer-preview")("hello"),"undefined"!=typeof wp&&wp.customize&&(wp.customize("cm4all-theme-settings",(e=>e.bind((e=>{const t=JSON.parse(e);p(t,window.theme_schema.schema_ui);const o=new CustomEvent("cm4all-theme-settings",{detail:t});document.documentElement.dispatchEvent(o)})))),wp.customize.bind("change",(()=>{setTimeout((()=>{const e=document.querySelector(".cm4all-theme-navigation-main__menu .custom-logo-link > img");if(h([e,"optionalAccess",e=>e.src])){const t=function(e){const t=e+"=",o=decodeURIComponent(document.cookie).split(";");for(let s of o){for(;" "===s.charAt(0);)s=s.substring(1);if(0===s.indexOf(t))return s.substring(t.length,s.length)}return""}("custom-logo-src");t&&t!==e.src?(document.cookie="custom-logo-src="+e.src,window.top.theme_schema.values.Navigation["navigation-layout"]["logo-size"]=100,window.top.theme_schema.values.set(window.top.theme_schema.values)):document.cookie="custom-logo-src="+e.src}}),1e3)})),document.cookie="custom-logo-src="+h([document,"access",e=>e.querySelector,"call",e=>e(".cm4all-theme-logo-main .custom-logo-link > img"),"optionalAccess",e=>e.src]))}();
//# sourceMappingURL=customizer-preview.min.js.map
