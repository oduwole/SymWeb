var cm4all_wordpress_customizer=function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function o(e,t){return Array.from(t.matchAll(/[^\/#]+/g)).flat().reduce(((e,t)=>function(e){let t,o=e[0],s=1;for(;s<e.length;){const n=e[s],l=e[s+1];if(s+=2,("optionalAccess"===n||"optionalCall"===n)&&null==o)return;"access"===n||"optionalAccess"===n?(t=o,o=l(o)):"call"!==n&&"optionalCall"!==n||(o=l(((...e)=>o.call(t,...e))),t=void 0)}return o}([e,"optionalAccess",e=>e[t]])),e)}function s(e,t,o){let s=e;for(let n=0;n<o.steps;n++)s=parseFloat(s*o.scale),s="px"===t?Math.round(s):s.toFixed(2);return s}function n(e,t=Object.values(window.snippet_library)){for(const o of t)for(const t of o.snippets)if(t.id===e)return t;return{}}const l={css:"<style>(.*)</style>",js:"<script>(.*)<\/script>"};function c(e,t){const o=e.type.split("+");for(const s of o){let n="";if(1===o.length)n=e.value.global;else{n=new RegExp(l[s]).exec(e.value.global)[1]}let c=null;"css"===s?(c=document.createElement("style"),c.id="cm4all-code-snippet-"+e.id+"-inline-css",c.styleSheet?c.styleSheet.cssText=n:c.appendChild(document.createTextNode(n))):"js"===s&&(c=document.createElement("script"),c.id="cm4all-code-snippet-"+e.id+"-js-after",c.type="text/javascript",c.innerHTML=n),t.getElementsByTagName("head")[0].appendChild(c)}}function i(e,t){const o=t.querySelectorAll(`style[id^="cm4all-code-snippet-${e}"],script[id^="cm4all-code-snippet-${e}"]`);for(const s of o)s.parentNode.removeChild(s)}function a(e){let t,o=e[0],s=1;for(;s<e.length;){const n=e[s],l=e[s+1];if(s+=2,("optionalAccess"===n||"optionalCall"===n)&&null==o)return;"access"===n||"optionalAccess"===n?(t=o,o=l(o)):"call"!==n&&"optionalCall"!==n||(o=l(((...e)=>o.call(t,...e))),t=void 0)}return o}const r=t(e).default("cm4all-customizer");function d(e){return"string"==typeof e&&e.startsWith("trinity-",0)?`var(--wp--preset--color--${e})`:e}function m(e,t,o){r('document.documentElement.style.setProperty("--cm4all-theme-%s", "%s");',t,o);const s=a([document,"access",e=>e.getElementById,"call",t=>t(e),"optionalAccess",e=>e.sheet]);if(s)for(const n of s.cssRules)"body"===n.selectorText&&-1!==n.cssText.indexOf(`--cm4all-theme-${t}`)&&n.style.setProperty(`--cm4all-theme-${t}`,o);else document.documentElement.style.setProperty(`--cm4all-theme-${t}`,o)}function u(e,t){r("customize(%O)",e);const n=(t,l)=>{Object.entries(t).forEach((([t,c])=>{if("object"==typeof c&&t.includes("fontfamily")&&c.name){const e="initial"!==c.name?"'":"";if(m("cm4all-customizer-font-handle-inline-css",t,`${e}${c.name}${e}`),void 0===c.url)return;if(void 0!==window.theme_schema.fonts.google_fonts.find((e=>e.family===c.name))){const e="https://fonts.googleapis.com/css2?family="+c.name.replace(" ","+")+":ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900",t=new XMLHttpRequest;t.open("GET",e),t.send(),t.onreadystatechange=()=>{if(t.readyState===XMLHttpRequest.DONE){const e=t.status;if(0===e||e>=200&&e<400){const e=t.responseText,o=document.createElement("style");o.type="text/css",o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e)),document.getElementsByTagName("head")[0].appendChild(o)}}}}else if(c.url){new FontFace(c.name,`url(${c.url})`).load().then((e=>document.fonts.add(e))).catch((e=>{console.log("failed to load font %s: %O",c.name,e)}))}}else if(a([c,"optionalAccess",e=>e.desktop])){const n=l[t]["ui:inherit"];for(const l in c){let i=c[l];if("initial"===i||-1===i){i=o(e,n.$ref);const t=i.toString().match(/([^a-z]+)([a-z]+)/);t&&a([n,"optionalAccess",e=>e.scaling])&&(i=s(parseFloat(t[1]),t[2],a([n,"optionalAccess",e=>e.scaling,"access",e=>e[l]]))+t[2])}m(`cm4all-customizer-${"logo-navigation-presets"===t?"dummy":"font"}-handle-inline-css`,l+"-"+t,i)}}else if(t.includes("fontweight")){const e=c.substring(0,3),o=c.includes("italic")?"italic":"normal";m("cm4all-customizer-font-handle-inline-css",t,e),m("cm4all-customizer-font-handle-inline-css",t+"-style",o)}else if(" "===c&&"colorpalette"===l[t]["ui:widget"]){const s=l[t]["ui:inherit"],n=o(e,s.$ref);m("cm4all-customizer-dummy-handle-inline-css",t,c=d(n))}else if("object"==typeof c)if(a([c,"optionalAccess",e=>e.slug])&&a([c,"optionalAccess",e=>e.color])){const e=a([document,"access",e=>e.getElementById,"call",e=>e("global-styles-inline-css"),"optionalAccess",e=>e.sheet]);if(e)for(const t of e.cssRules)"body"===t.selectorText&&t.style.setProperty(`--wp--preset--color--${c.slug}`,c.color),t.selectorText===`.has-${c.slug}-color`&&t.style.setProperty("color",c.color,"important"),t.selectorText===`.has-${c.slug}-background-color`&&t.style.setProperty("background-color",c.color,"important");else r('document.documentElement.style.setProperty("--wp--preset--color--%s", "%s");',c.slug,c.color),document.documentElement.style.setProperty(`--wp--preset--color--${c.slug}`,c.color)}else if(a([c,"optionalAccess",e=>e.desktop]))for(const e in c)m("cm4all-customizer-dummy-handle-inline-css",e+"-"+t,c[e]);else n(c,l[t]);else m("cm4all-customizer-dummy-handle-inline-css",t,c=d(c))}))};n(e,t)}if(!Object.keys(window.theme_schema.values).length&&window.cm4all_wordpress_react_jsonschema_form_utils)try{window.theme_schema.values=window.cm4all_wordpress_react_jsonschema_form_utils.getDefaultFormState(window.theme_schema.schema)}catch(f){throw console.log("Failed to compute default theme settings"),f}function p(){return window.top.document.querySelector("#customize-preview > iframe").contentWindow.document}if(window.snippetListener=window.snippetListener||!1,!window.snippetListener){let e=null;document.documentElement.addEventListener("snippet-add",(t=>{null===e&&(console.log("no frame found, getting it now"),e=p());for(const o of t.detail){c(n(o,Object.values(window.snippet_library)),e)}})),document.documentElement.addEventListener("snippet-remove",(t=>{null===e&&(console.log("no frame found, getting it now"),e=p());for(const o of t.detail)i(o,e);t.stopPropagation()})),window.snippetListener=!0}return u(window.theme_schema.values,window.theme_schema.schema_ui),u}(cm4all_wordpress_debug);
//# sourceMappingURL=customizer.min.js.map
